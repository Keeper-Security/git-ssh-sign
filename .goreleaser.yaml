signs:
  - artifacts: binary
    args: ["--batch", "-u", "{{ .Env.GPG_FINGERPRINT }}", "--output", "${signature}", "--detach-sign", "${artifact}"]

builds:
- binary: ssh-sign
  id: git-ssh-sign
  main: ./cmd/ssh-sign/main.go
  goos:
  - linux
  - windows
  goarch:
  - amd64
  - arm64

# Separated build for the MacOS binary for notarization
- binary: ssh-sign
  id: git-ssh-sign-macos
  main: ./cmd/ssh-sign/main.go
  goos:
  - darwin
  goarch:
  - amd64
  - arm64
  hooks:
    post: gon gon.hcl
